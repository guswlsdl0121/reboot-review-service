## 리뷰 서비스 요구 사항

### 설명
- 구현이 완료된 항목에 대해서는 ✅ 이모지로 진행상황을 나타낸다.
- 구현 과정에 따라 구체화된 요구사항 or 예외사항도 추가한다.

<br>

### 개요
- `Product`에 대한 `review`를 작성하고, 상품 별 `review 점수`, `개수`, `리뷰 내용`을 관리하는 시스템 구성

<br>

### 비지니스 요구사항
- `review`는 존재하는 상품에만 작성할 수 있다. ✅
  - `productId`에 해당하는 `product`가 존재하지 않는다면, NotFound 반환 ✅


- `user`는 하나의 `Product`에 대해 하나의 `review`만 작성할 수 있다.
  - 만약 `user`가 한 `product`에 중복 리뷰를 작성하려고 하면 Conflicit 반환 ✅
  - 추가적으로, 따닥 요청 막기 구현 필요 -> 일단 나중에 하자.. 조회 얼른 만들어야 됨.


- `user`는 `review`를 달 떄 1~5점 사이의 `score`를 남길 수 있다. ✅
  - 만약 점수 범위를 초과한다면, BadRequest 반환 ✅


- `image`는 선택적으로 업로드 가능하다. 단, S3와 연동을 할 필요는 없고 더미 구현체로 대체한다. ✅


- `review`는 **가장 최근에 작성된 리뷰 순으로 조회**한다.

<br>

### 기술적 요구 사항
- mysql 테이블에 인덱스를 잘 탈 수 있게 설계


- `product` 테이블에 `review_count`와 `score`가 잘 반영되어야 한다. ✅


- **많은 유저들이 동시에 리뷰를 작성할 떄 발생할 수 있는 문제** 고려 (동시성 문제)
  - 여러 사용자가 같은 상품에 대해 동시에 리뷰 작성할 때 오류 발생 (reviewCount, score에 대해 race condition 생김)
  - 이를 해결하기 위해, 비관적 락 사용

- 테스트 코드 작성

<br>

### 과제 공통 사항
- 클라우드 환경에서의 배포는 고려 X ✅
- docker-compose 기반으로 필요한 인프라 설정을 한다. ✅
- DB 스키마는 요구 사항을 만족할 수 있게 설계하되, 인덱스를 설정해 성능에 문제가 없도록 구성
- 영속적인 정보를 저장할 때는 Mysql만을 고려 (DynamoDB, Cassandra 사용 X) ✅